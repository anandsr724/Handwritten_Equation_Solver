schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/equation_solver/pipeline/stage_01_data_ingestion.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 00e1669695c4c6e410506e839bc694ce
      size: 782
    - path: src/equation_solver/pipeline/stage_01_data_ingestion.py
      hash: md5
      md5: f86effaf811863abdf0d1e093c18b8eb
      size: 906
    outs:
    - path: artifacts/data_ingestion/symbol_data
      hash: md5
      md5: d120b826796ddbbed3332387cde934a7.dir
      size: 2024859
      nfiles: 2500
  prepare_base_model:
    cmd: python src/equation_solver/pipeline/stage_02_prepare_base_model.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 00e1669695c4c6e410506e839bc694ce
      size: 782
    - path: src/equation_solver/pipeline/stage_02_prepare_base_model.py
      hash: md5
      md5: a0b608a8a608073adfc87b5c21a50a29
      size: 948
    params:
      params.yaml:
        CLASSES: 25
        EPOCHS: 5
        FREEZE_ALL: false
        FREEZE_TILL: 10
        IMAGE_SIZE:
        - 45
        - 45
        - 1
        INCLUDE_TOP: false
        KEEP_DENSE: true
        LEARNING_RATE: 0.001
        WEIGHTS:
    outs:
    - path: artifacts/prepare_base_model
      hash: md5
      md5: 20c0b821c748078752d88c4984aa2119.dir
      size: 59710936
      nfiles: 2
  training:
    cmd: python src/equation_solver/pipeline/stage_03_model_training.py
    deps:
    - path: artifacts/data_ingestion/symbol_data
      hash: md5
      md5: d120b826796ddbbed3332387cde934a7.dir
      size: 2024859
      nfiles: 2500
    - path: artifacts/prepare_base_model
      hash: md5
      md5: 20c0b821c748078752d88c4984aa2119.dir
      size: 59710936
      nfiles: 2
    - path: config/config.yaml
      hash: md5
      md5: 00e1669695c4c6e410506e839bc694ce
      size: 782
    - path: src/equation_solver/pipeline/stage_03_model_training.py
      hash: md5
      md5: 267546b5c126f6206930cebd6a0f3b77
      size: 882
    params:
      params.yaml:
        AUGMENTATION: false
        BATCH_SIZE: 128
        EPOCHS: 5
        IMAGE_SIZE:
        - 45
        - 45
        - 1
    outs:
    - path: artifacts/training/model.h5
      hash: md5
      md5: 2381715a95a3dc916ae668857bacf56b
      size: 14972000
  evaluation:
    cmd: python src/equation_solver/pipeline/stage_04_model_evaluation.py
    deps:
    - path: artifacts/data_ingestion/symbol_data
      hash: md5
      md5: d120b826796ddbbed3332387cde934a7.dir
      size: 2024859
      nfiles: 2500
    - path: artifacts/training/model.h5
      hash: md5
      md5: 2381715a95a3dc916ae668857bacf56b
      size: 14972000
    - path: config/config.yaml
      hash: md5
      md5: 00e1669695c4c6e410506e839bc694ce
      size: 782
    - path: src/equation_solver/pipeline/stage_04_model_evaluation.py
      hash: md5
      md5: b8fa29a157c4d726298cf6271a979b0a
      size: 852
    params:
      params.yaml:
        BATCH_SIZE: 128
        IMAGE_SIZE:
        - 45
        - 45
        - 1
    outs:
    - path: scores.json
      hash: md5
      md5: 36592ae817e87392af2fde4e913b751a
      size: 74
